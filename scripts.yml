version: 0.1.0
name: deno_template
scripts:
  check:
    cmd: deno run --allow-read --allow-env https://deno.land/x/jw_cli@v0.2.3/cli/valid_deps.ts
    watch: false
  dev:
    cmd: denon check && deno run mod.ts
    desc: run my main.ts file
    allow:
      - net
      - env
      - write
      - read
    unstable: true
    tsconfig: tsconfig.json
    # lock: lock.json
  build:
    cmd: deno bundle mod.ts mod.js
    watch: false
    unstable: true
    env:
      NODE_ENV: production
  dist:
    cmd: deno run mod.js
    desc: run dist server
    allow:
      - net
      - env
      - write
      - read
    unstable: true
    log: info
    watch: false
    tsconfig: tsconfig.json
    env:
      NODE_ENV: production
      PORT: '2000'
  cache: 
    cmd: deno cache --lock=lock.json --lock-write --unstable deps.ts
    watch: false